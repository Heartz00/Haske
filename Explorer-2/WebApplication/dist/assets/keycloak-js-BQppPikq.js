import{s as ee}from"./js-sha256-CSWIq9JC.js";import{j as K}from"./jwt-decode-VWaDGczM.js";if(typeof Promise>"u")throw Error("Keycloak requires an environment that supports Promises. Make sure that you include the appropriate polyfill.");function re(p){if(!(this instanceof re))throw new Error("The 'Keycloak' constructor must be invoked with 'new'.");for(var e=this,k,T=[],A,m={enable:!0,callbackList:[],interval:5},I=document.getElementsByTagName("script"),S=0;S<I.length;S++)(I[S].src.indexOf("keycloak.js")!==-1||I[S].src.indexOf("keycloak.min.js")!==-1)&&I[S].src.indexOf("version=")!==-1&&(e.iframeVersion=I[S].src.substring(I[S].src.indexOf("version=")+8).split("&")[0]);var R=!0,y=Y(console.info),D=Y(console.warn);e.init=function(r){if(e.didInitialize)throw new Error("A 'Keycloak' instance can only be initialized once.");e.didInitialize=!0,e.authenticated=!1,A=Z();var t=["default","cordova","cordova-native"];if(r&&t.indexOf(r.adapter)>-1?k=P(r.adapter):r&&typeof r.adapter=="object"?k=r.adapter:window.Cordova||window.cordova?k=P("cordova"):k=P(),r){if(typeof r.useNonce<"u"&&(R=r.useNonce),typeof r.checkLoginIframe<"u"&&(m.enable=r.checkLoginIframe),r.checkLoginIframeInterval&&(m.interval=r.checkLoginIframeInterval),r.onLoad==="login-required"&&(e.loginRequired=!0),r.responseMode)if(r.responseMode==="query"||r.responseMode==="fragment")e.responseMode=r.responseMode;else throw"Invalid value for responseMode";if(r.flow){switch(r.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=r.flow}if(r.timeSkew!=null&&(e.timeSkew=r.timeSkew),r.redirectUri&&(e.redirectUri=r.redirectUri),r.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=r.silentCheckSsoRedirectUri),typeof r.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=r.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,r.pkceMethod){if(r.pkceMethod!=="S256")throw new TypeError(`Invalid value for 'pkceMethod', expected 'S256' but got '${r.pkceMethod}'.`);e.pkceMethod=r.pkceMethod}else e.pkceMethod="S256";typeof r.enableLogging=="boolean"?e.enableLogging=r.enableLogging:e.enableLogging=!1,r.logoutMethod==="POST"?e.logoutMethod="POST":e.logoutMethod="GET",typeof r.scope=="string"&&(e.scope=r.scope),typeof r.acrValues=="string"&&(e.acrValues=r.acrValues),typeof r.messageReceiveTimeout=="number"&&r.messageReceiveTimeout>0?e.messageReceiveTimeout=r.messageReceiveTimeout:e.messageReceiveTimeout=1e4}e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var a=h(),c=h();c.promise.then(function(){e.onReady&&e.onReady(e.authenticated),a.setSuccess(e.authenticated)}).catch(function(l){a.setError(l)});var n=q();function i(){var l=function(f){f||(d.prompt="none"),r&&r.locale&&(d.locale=r.locale),e.login(d).then(function(){c.setSuccess()}).catch(function(g){c.setError(g)})},u=function(){var f=document.createElement("iframe"),g=e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});f.setAttribute("src",g),f.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),f.setAttribute("title","keycloak-silent-check-sso"),f.style.display="none",document.body.appendChild(f);var b=function(v){if(!(v.origin!==window.location.origin||f.contentWindow!==v.source)){var E=_(v.data);U(E,c),document.body.removeChild(f),window.removeEventListener("message",b)}};window.addEventListener("message",b)},d={};switch(r.onLoad){case"check-sso":m.enable?x().then(function(){L().then(function(f){f?c.setSuccess():e.silentCheckSsoRedirectUri?u():l(!1)}).catch(function(f){c.setError(f)})}):e.silentCheckSsoRedirectUri?u():l(!1);break;case"login-required":l(!0);break;default:throw"Invalid value for onLoad"}}function o(){var l=_(window.location.href);if(l&&window.history.replaceState(window.history.state,null,l.newUrl),l&&l.valid)return x().then(function(){U(l,c)}).catch(function(u){c.setError(u)});r?r.token&&r.refreshToken?(C(r.token,r.refreshToken,r.idToken),m.enable?x().then(function(){L().then(function(u){u?(e.onAuthSuccess&&e.onAuthSuccess(),c.setSuccess(),M()):c.setSuccess()}).catch(function(u){c.setError(u)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),c.setSuccess()}).catch(function(u){e.onAuthError&&e.onAuthError(),r.onLoad?i():c.setError(u)})):r.onLoad?i():c.setSuccess():c.setSuccess()}function s(){var l=h(),u=function(){(document.readyState==="interactive"||document.readyState==="complete")&&(document.removeEventListener("readystatechange",u),l.setSuccess())};return document.addEventListener("readystatechange",u),u(),l.promise}return n.then(function(){s().then(W).then(o).catch(function(l){a.setError(l)})}),n.catch(function(l){a.setError(l)}),a.promise},e.login=function(r){return k.login(r)};function B(r){var t=null,a=window.crypto||window.msCrypto;if(a&&a.getRandomValues&&window.Uint8Array)return t=new Uint8Array(r),a.getRandomValues(t),t;t=new Array(r);for(var c=0;c<t.length;c++)t[c]=Math.floor(256*Math.random());return t}function F(r){return j(r,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function j(r,t){for(var a=B(r),c=new Array(r),n=0;n<r;n++)c[n]=t.charCodeAt(a[n]%t.length);return String.fromCharCode.apply(null,c)}function O(r,t){if(r!=="S256")throw new TypeError(`Invalid value for 'pkceMethod', expected 'S256' but got '${r}'.`);const a=new Uint8Array(ee.arrayBuffer(t));return te(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function G(r){var t={id_token:{acr:r}};return JSON.stringify(t)}e.createLoginUrl=function(r){var t=J(),a=J(),c=k.redirectUri(r),n={state:t,nonce:a,redirectUri:encodeURIComponent(c)};r&&r.prompt&&(n.prompt=r.prompt);var i;r&&r.action=="register"?i=e.endpoints.register():i=e.endpoints.authorize();var o=r&&r.scope||e.scope;o?o.indexOf("openid")===-1&&(o="openid "+o):o="openid";var s=i+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(c)+"&state="+encodeURIComponent(t)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(o);if(R&&(s=s+"&nonce="+encodeURIComponent(a)),r&&r.prompt&&(s+="&prompt="+encodeURIComponent(r.prompt)),r&&r.maxAge&&(s+="&max_age="+encodeURIComponent(r.maxAge)),r&&r.loginHint&&(s+="&login_hint="+encodeURIComponent(r.loginHint)),r&&r.idpHint&&(s+="&kc_idp_hint="+encodeURIComponent(r.idpHint)),r&&r.action&&r.action!="register"&&(s+="&kc_action="+encodeURIComponent(r.action)),r&&r.locale&&(s+="&ui_locales="+encodeURIComponent(r.locale)),r&&r.acr){var l=G(r.acr);s+="&claims="+encodeURIComponent(l)}if((r&&r.acrValues||e.acrValues)&&(s+="&acr_values="+encodeURIComponent(r.acrValues||e.acrValues)),e.pkceMethod){var u=F(96);n.pkceCodeVerifier=u;var d=O(e.pkceMethod,u);s+="&code_challenge="+d,s+="&code_challenge_method="+e.pkceMethod}return A.add(n),s},e.logout=function(r){return k.logout(r)},e.createLogoutUrl=function(r){if(((r==null?void 0:r.logoutMethod)??e.logoutMethod)==="POST")return e.endpoints.logout();var a=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(k.redirectUri(r,!1));return e.idToken&&(a+="&id_token_hint="+encodeURIComponent(e.idToken)),a},e.register=function(r){return k.register(r)},e.createRegisterUrl=function(r){return r||(r={}),r.action="register",e.createLoginUrl(r)},e.createAccountUrl=function(r){var t=w(),a=void 0;return typeof t<"u"&&(a=t+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(k.redirectUri(r))),a},e.accountManagement=function(){return k.accountManagement()},e.hasRealmRole=function(r){var t=e.realmAccess;return!!t&&t.roles.indexOf(r)>=0},e.hasResourceRole=function(r,t){if(!e.resourceAccess)return!1;var a=e.resourceAccess[t||e.clientId];return!!a&&a.roles.indexOf(r)>=0},e.loadUserProfile=function(){var r=w()+"/account",t=new XMLHttpRequest;t.open("GET",r,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+e.token);var a=h();return t.onreadystatechange=function(){t.readyState==4&&(t.status==200?(e.profile=JSON.parse(t.responseText),a.setSuccess(e.profile)):a.setError())},t.send(),a.promise},e.loadUserInfo=function(){var r=e.endpoints.userinfo(),t=new XMLHttpRequest;t.open("GET",r,!0),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Authorization","bearer "+e.token);var a=h();return t.onreadystatechange=function(){t.readyState==4&&(t.status==200?(e.userInfo=JSON.parse(t.responseText),a.setSuccess(e.userInfo)):a.setError())},t.send(),a.promise},e.isTokenExpired=function(r){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return y("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var t=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(r){if(isNaN(r))throw"Invalid minValidity";t-=r}return t<0},e.updateToken=function(r){var t=h();if(!e.refreshToken)return t.setError(),t.promise;r=r||5;var a=function(){var n=!1;if(r==-1?(n=!0,y("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(r))&&(n=!0,y("[KEYCLOAK] Refreshing token: token expired")),!n)t.setSuccess(!1);else{var i="grant_type=refresh_token&refresh_token="+e.refreshToken,o=e.endpoints.token();if(T.push(t),T.length==1){var s=new XMLHttpRequest;s.open("POST",o,!0),s.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s.withCredentials=!0,i+="&client_id="+encodeURIComponent(e.clientId);var l=new Date().getTime();s.onreadystatechange=function(){if(s.readyState==4)if(s.status==200){y("[KEYCLOAK] Token refreshed"),l=(l+new Date().getTime())/2;var u=JSON.parse(s.responseText);C(u.access_token,u.refresh_token,u.id_token,l),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var d=T.pop();d!=null;d=T.pop())d.setSuccess(!0)}else{D("[KEYCLOAK] Failed to refresh token"),s.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var d=T.pop();d!=null;d=T.pop())d.setError(!0)}},s.send(i)}}};if(m.enable){var c=L();c.then(function(){a()}).catch(function(n){t.setError(n)})}else a();return t.promise},e.clearToken=function(){e.token&&(C(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function w(){if(typeof e.authServerUrl<"u")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function X(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function U(r,t){var a=r.code,c=r.error,n=r.prompt,i=new Date().getTime();if(r.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(r.kc_action_status),c){if(n!="none"){var o={error:c,error_description:r.error_description};e.onAuthError&&e.onAuthError(o),t&&t.setError(o)}else t&&t.setSuccess();return}else e.flow!="standard"&&(r.access_token||r.id_token)&&d(r.access_token,null,r.id_token,!0);if(e.flow!="implicit"&&a){var s="code="+a+"&grant_type=authorization_code",l=e.endpoints.token(),u=new XMLHttpRequest;u.open("POST",l,!0),u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),s+="&client_id="+encodeURIComponent(e.clientId),s+="&redirect_uri="+r.redirectUri,r.pkceCodeVerifier&&(s+="&code_verifier="+r.pkceCodeVerifier),u.withCredentials=!0,u.onreadystatechange=function(){if(u.readyState==4)if(u.status==200){var f=JSON.parse(u.responseText);d(f.access_token,f.refresh_token,f.id_token,e.flow==="standard"),M()}else e.onAuthError&&e.onAuthError(),t&&t.setError()},u.send(s)}function d(f,g,b,v){i=(i+new Date().getTime())/2,C(f,g,b,i),R&&e.idTokenParsed&&e.idTokenParsed.nonce!=r.storedNonce?(y("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),t&&t.setError()):v&&(e.onAuthSuccess&&e.onAuthSuccess(),t&&t.setSuccess())}}function q(r){var t=h(),a;p?typeof p=="string"&&(a=p):a="keycloak.json";function c(u){u?e.endpoints={authorize:function(){return u.authorization_endpoint},token:function(){return u.token_endpoint},logout:function(){if(!u.end_session_endpoint)throw"Not supported by the OIDC server";return u.end_session_endpoint},checkSessionIframe:function(){if(!u.check_session_iframe)throw"Not supported by the OIDC server";return u.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!u.userinfo_endpoint)throw"Not supported by the OIDC server";return u.userinfo_endpoint}}:e.endpoints={authorize:function(){return w()+"/protocol/openid-connect/auth"},token:function(){return w()+"/protocol/openid-connect/token"},logout:function(){return w()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){var d=w()+"/protocol/openid-connect/login-status-iframe.html";return e.iframeVersion&&(d=d+"?version="+e.iframeVersion),d},thirdPartyCookiesIframe:function(){var d=w()+"/protocol/openid-connect/3p-cookies/step1.html";return e.iframeVersion&&(d=d+"?version="+e.iframeVersion),d},register:function(){return w()+"/protocol/openid-connect/registrations"},userinfo:function(){return w()+"/protocol/openid-connect/userinfo"}}}if(a){var n=new XMLHttpRequest;n.open("GET",a,!0),n.setRequestHeader("Accept","application/json"),n.onreadystatechange=function(){if(n.readyState==4)if(n.status==200||V(n)){var u=JSON.parse(n.responseText);e.authServerUrl=u["auth-server-url"],e.realm=u.realm,e.clientId=u.resource,c(null),t.setSuccess()}else t.setError()},n.send()}else{if(!p.clientId)throw"clientId missing";e.clientId=p.clientId;var i=p.oidcProvider;if(i)if(typeof i=="string"){var l;i.charAt(i.length-1)=="/"?l=i+".well-known/openid-configuration":l=i+"/.well-known/openid-configuration";var n=new XMLHttpRequest;n.open("GET",l,!0),n.setRequestHeader("Accept","application/json"),n.onreadystatechange=function(){if(n.readyState==4)if(n.status==200||V(n)){var d=JSON.parse(n.responseText);c(d),t.setSuccess()}else t.setError()},n.send()}else c(i),t.setSuccess();else{if(!p.url){for(var o=document.getElementsByTagName("script"),s=0;s<o.length;s++)if(o[s].src.match(/.*keycloak\.js/)){p.url=o[s].src.substr(0,o[s].src.indexOf("/js/keycloak.js"));break}}if(!p.realm)throw"realm missing";e.authServerUrl=p.url,e.realm=p.realm,c(null),t.setSuccess()}}return t.promise}function V(r){return r.status==0&&r.responseText&&r.responseURL.startsWith("file:")}function C(r,t,a,c){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),t?(e.refreshToken=t,e.refreshTokenParsed=K(t)):(delete e.refreshToken,delete e.refreshTokenParsed),a?(e.idToken=a,e.idTokenParsed=K(a)):(delete e.idToken,delete e.idTokenParsed),r){if(e.token=r,e.tokenParsed=K(r),e.sessionId=e.tokenParsed.session_state,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,c&&(e.timeSkew=Math.floor(c/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(y("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var n=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;y("[KEYCLOAK] Token expires in "+Math.round(n/1e3)+" s"),n<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,n)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function J(){var r="0123456789abcdef",t=j(36,r).split("");t[14]="4",t[19]=r.substr(t[19]&3|8,1),t[8]=t[13]=t[18]=t[23]="-";var a=t.join("");return a}function _(r){var t=Q(r);if(t){var a=A.get(t.state);return a&&(t.valid=!0,t.redirectUri=a.redirectUri,t.storedNonce=a.nonce,t.prompt=a.prompt,t.pkceCodeVerifier=a.pkceCodeVerifier),t}}function Q(r){var t;switch(e.flow){case"standard":t=["code","state","session_state","kc_action_status","iss"];break;case"implicit":t=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status","iss"];break;case"hybrid":t=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status","iss"];break}t.push("error"),t.push("error_description"),t.push("error_uri");var a=r.indexOf("?"),c=r.indexOf("#"),n,i;if(e.responseMode==="query"&&a!==-1?(n=r.substring(0,a),i=z(r.substring(a+1,c!==-1?c:r.length),t),i.paramsString!==""&&(n+="?"+i.paramsString),c!==-1&&(n+=r.substring(c))):e.responseMode==="fragment"&&c!==-1&&(n=r.substring(0,c),i=z(r.substring(c+1),t),i.paramsString!==""&&(n+="#"+i.paramsString)),i&&i.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((i.oauthParams.code||i.oauthParams.error)&&i.oauthParams.state)return i.oauthParams.newUrl=n,i.oauthParams}else if(e.flow==="implicit"&&(i.oauthParams.access_token||i.oauthParams.error)&&i.oauthParams.state)return i.oauthParams.newUrl=n,i.oauthParams}}function z(r,t){for(var a=r.split("&"),c={paramsString:"",oauthParams:{}},n=0;n<a.length;n++){var i=a[n].indexOf("="),o=a[n].slice(0,i);t.indexOf(o)!==-1?c.oauthParams[o]=a[n].slice(i+1):(c.paramsString!==""&&(c.paramsString+="&"),c.paramsString+=a[n])}return c}function h(){var r={setSuccess:function(t){r.resolve(t)},setError:function(t){r.reject(t)}};return r.promise=new Promise(function(t,a){r.resolve=t,r.reject=a}),r}function $(r,t,a){var c=null,n=new Promise(function(i,o){c=setTimeout(function(){o({error:a})},t)});return Promise.race([r,n]).finally(function(){clearTimeout(c)})}function x(){var r=h();if(!m.enable||m.iframe)return r.setSuccess(),r.promise;var t=document.createElement("iframe");m.iframe=t,t.onload=function(){var n=e.endpoints.authorize();n.charAt(0)==="/"?m.iframeOrigin=X():m.iframeOrigin=n.substring(0,n.indexOf("/",8)),r.setSuccess()};var a=e.endpoints.checkSessionIframe();t.setAttribute("src",a),t.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),t.setAttribute("title","keycloak-session-iframe"),t.style.display="none",document.body.appendChild(t);var c=function(n){if(!(n.origin!==m.iframeOrigin||m.iframe.contentWindow!==n.source)&&(n.data=="unchanged"||n.data=="changed"||n.data=="error")){n.data!="unchanged"&&e.clearToken();for(var i=m.callbackList.splice(0,m.callbackList.length),o=i.length-1;o>=0;--o){var s=i[o];n.data=="error"?s.setError():s.setSuccess(n.data=="unchanged")}}};return window.addEventListener("message",c,!1),r.promise}function M(){m.enable&&e.token&&setTimeout(function(){L().then(function(r){r&&M()})},m.interval*1e3)}function L(){var r=h();if(m.iframe&&m.iframeOrigin){var t=e.clientId+" "+(e.sessionId?e.sessionId:"");m.callbackList.push(r);var a=m.iframeOrigin;m.callbackList.length==1&&m.iframe.contentWindow.postMessage(t,a)}else r.setSuccess();return r.promise}function W(){var r=h();if(m.enable||e.silentCheckSsoRedirectUri){var t=document.createElement("iframe");t.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),t.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),t.setAttribute("title","keycloak-3p-check-iframe"),t.style.display="none",document.body.appendChild(t);var a=function(c){t.contentWindow===c.source&&(c.data!=="supported"&&c.data!=="unsupported"||(c.data==="unsupported"&&(D(`[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:

 - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).
 - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).

For more information see: https://www.keycloak.org/docs/latest/securing_apps/#_modern_browsers`),m.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1)),document.body.removeChild(t),window.removeEventListener("message",a),r.setSuccess()))};window.addEventListener("message",a,!1)}else r.setSuccess();return $(r.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function P(r){if(!r||r=="default")return{login:function(o){return window.location.assign(e.createLoginUrl(o)),h().promise},logout:async function(o){if(((o==null?void 0:o.logoutMethod)??e.logoutMethod)==="GET"){window.location.replace(e.createLogoutUrl(o));return}const l=e.createLogoutUrl(o),u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id_token_hint:e.idToken,client_id:e.clientId,post_logout_redirect_uri:k.redirectUri(o,!1)})});if(u.redirected){window.location.href=u.url;return}if(u.ok){window.location.reload();return}throw new Error("Logout failed, request returned an error code.")},register:function(o){return window.location.assign(e.createRegisterUrl(o)),h().promise},accountManagement:function(){var o=e.createAccountUrl();if(typeof o<"u")window.location.href=o;else throw"Not supported by the OIDC server";return h().promise},redirectUri:function(o,s){return o&&o.redirectUri?o.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(r=="cordova"){m.enable=!1;var t=function(o,s,l){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(o,s,l):window.open(o,s,l)},a=function(o){return o&&o.cordovaOptions?Object.keys(o.cordovaOptions).reduce(function(s,l){return s[l]=o.cordovaOptions[l],s},{}):{}},c=function(o){return Object.keys(o).reduce(function(s,l){return s.push(l+"="+o[l]),s},[]).join(",")},n=function(o){var s=a(o);return s.location="no",o&&o.prompt=="none"&&(s.hidden="yes"),c(s)},i=function(){return e.redirectUri||"http://localhost"};return{login:function(o){var s=h(),l=n(o),u=e.createLoginUrl(o),d=t(u,"_blank",l),f=!1,g=!1,b=function(){g=!0,d.close()};return d.addEventListener("loadstart",function(v){if(v.url.indexOf(i())==0){var E=_(v.url);U(E,s),b(),f=!0}}),d.addEventListener("loaderror",function(v){if(!f)if(v.url.indexOf(i())==0){var E=_(v.url);U(E,s),b(),f=!0}else s.setError(),b()}),d.addEventListener("exit",function(v){g||s.setError({reason:"closed_by_user"})}),s.promise},logout:function(o){var s=h(),l=e.createLogoutUrl(o),u=t(l,"_blank","location=no,hidden=yes,clearcache=yes"),d;return u.addEventListener("loadstart",function(f){f.url.indexOf(i())==0&&u.close()}),u.addEventListener("loaderror",function(f){f.url.indexOf(i())==0||(d=!0),u.close()}),u.addEventListener("exit",function(f){d?s.setError():(e.clearToken(),s.setSuccess())}),s.promise},register:function(o){var s=h(),l=e.createRegisterUrl(),u=n(o),d=t(l,"_blank",u);return d.addEventListener("loadstart",function(f){if(f.url.indexOf(i())==0){d.close();var g=_(f.url);U(g,s)}}),s.promise},accountManagement:function(){var o=e.createAccountUrl();if(typeof o<"u"){var s=t(o,"_blank","location=no");s.addEventListener("loadstart",function(l){l.url.indexOf(i())==0&&s.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(o){return i()}}}if(r=="cordova-native")return m.enable=!1,{login:function(o){var s=h(),l=e.createLoginUrl(o);return universalLinks.subscribe("keycloak",function(u){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var d=_(u.url);U(d,s)}),window.cordova.plugins.browsertab.openUrl(l),s.promise},logout:function(o){var s=h(),l=e.createLogoutUrl(o);return universalLinks.subscribe("keycloak",function(u){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),s.setSuccess()}),window.cordova.plugins.browsertab.openUrl(l),s.promise},register:function(o){var s=h(),l=e.createRegisterUrl(o);return universalLinks.subscribe("keycloak",function(u){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var d=_(u.url);U(d,s)}),window.cordova.plugins.browsertab.openUrl(l),s.promise},accountManagement:function(){var o=e.createAccountUrl();if(typeof o<"u")window.cordova.plugins.browsertab.openUrl(o);else throw"Not supported by the OIDC server"},redirectUri:function(o){return o&&o.redirectUri?o.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+r}var H=function(){if(!(this instanceof H))return new H;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var r=this;function t(){for(var a=new Date().getTime(),c=0;c<localStorage.length;c++){var n=localStorage.key(c);if(n&&n.indexOf("kc-callback-")==0){var i=localStorage.getItem(n);if(i)try{var o=JSON.parse(i).expires;(!o||o<a)&&localStorage.removeItem(n)}catch{localStorage.removeItem(n)}}}}r.get=function(a){if(a){var c="kc-callback-"+a,n=localStorage.getItem(c);return n&&(localStorage.removeItem(c),n=JSON.parse(n)),t(),n}},r.add=function(a){t();var c="kc-callback-"+a.state;a.expires=new Date().getTime()+60*60*1e3,localStorage.setItem(c,JSON.stringify(a))}},N=function(){if(!(this instanceof N))return new N;var r=this;r.get=function(n){if(n){var i=a("kc-callback-"+n);if(c("kc-callback-"+n,"",t(-100)),i)return JSON.parse(i)}},r.add=function(n){c("kc-callback-"+n.state,JSON.stringify(n),t(60))},r.removeItem=function(n){c(n,"",t(-100))};var t=function(n){var i=new Date;return i.setTime(i.getTime()+n*60*1e3),i},a=function(n){for(var i=n+"=",o=document.cookie.split(";"),s=0;s<o.length;s++){for(var l=o[s];l.charAt(0)==" ";)l=l.substring(1);if(l.indexOf(i)==0)return l.substring(i.length,l.length)}return""},c=function(n,i,o){var s=n+"="+i+"; expires="+o.toUTCString()+"; ";document.cookie=s}};function Z(){try{return new H}catch{}return new N}function Y(r){return function(){e.enableLogging&&r.apply(console,Array.prototype.slice.call(arguments))}}}function te(p){const e=String.fromCodePoint(...p);return btoa(e)}export{re as K};
